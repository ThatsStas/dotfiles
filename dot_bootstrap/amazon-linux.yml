# Copied from https://github.com/logandonley/dotfiles/
# based on https://www.youtube.com/watch?v=-RkANM9FfTM
---
- name: Get my user
  ansible.builtin.set_fact:
    remote_regular_user: "{{ ansible_env.SUDO_USER or ansible_user_id }}"
- name: Install packages core
  ansible.builtin.dnf:
    name:
      - git
      - htop
      - vim
      - gcc
      - zsh
      - tmux
      - zlib
      - make
      - patch
      - bzip2
      - openssl-devel
      - "@Development Tools"
      - autoconf
    state: present

- name: Change shell to zsh
  ansible.builtin.user:
    name: "{{ remote_regular_user }}"
    shell: /usr/bin/zsh
